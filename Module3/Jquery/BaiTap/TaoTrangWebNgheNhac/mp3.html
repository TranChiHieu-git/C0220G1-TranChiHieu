<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="jquery-3.5.1.min.js"></script>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <script src="js/bootstrap.js"></script>
    <link rel="stylesheet" href="plugin/css/jquery.equalizer.css">
    <link rel="stylesheet" href="plugin/css/main.css">
    <script src="plugin/js/jquery.equalizer.js"></script>
    <script src="plugin/js/jquery.reverseorder.js"></script>
    <script src="https://unpkg.com/wavesurfer.js"></script>
</head>
<body>
<div class="container-fluid">
    <div class="row">
        <div class="col-md-4"></div>
        <div class="col-md-4">
            <h1>MP3 WEB PLAYER</h1>
        </div>
        <div class="col-md-4"></div>
    </div>
    <div class="row">
        <div class="col-md-3"></div>
        <div class="col-md-6">
            <div class="song1 equalizer"></div>
        </div>
        <div class="col-md-3"></div>
    </div>
    <div class="row">
        <div class="col-md-3"></div>
        <div class="col-md-6">
            <div class="relative_left">
                <audio controls loop id="song1">
                    <source id="linkmp3"
                            src="https://aredir.nixcdn.com/NhacCuaTui995/SoRangEmBietAnhConYeuEm-JuunDangDung-6217224.mp3?st=vihqMTPwAKFhy_1OEVUE3A&e=1592196759"
                            type='audio/ogg'>
                </audio>
            </div>
        </div>
        <div class="col-md-3"></div>
    </div>
    <div class="row">
        <div class="col-md-3"></div>
        <div class="col-md-4">
            <h3>Thông tin bài hát: </h3>
        </div>
    </div>

    <div class="row">
        <div class="col-md-4"></div>
        <div class="col-md-4">
            <ul></ul>
            <img id="imgsong" src="">
        </div>
    </div>

    <div class="row-md-12">
        <div id="waveform" class="border">
            <progress id="progress" class="progress progress-striped" value="0" max="100"></progress>
        </div>
    </div>
    <div class="row">
        <div class="col-md-4"></div>
        <div class="col-md-5">
            <div class="controls">
                <button class="btn btn-primary" onclick="wavesurfer.skipBackward()">
                    <i class="fa fa-step-backward"></i>
                    Backward
                </button>

                <button class="btn btn-primary" onclick="wavesurfer.playPause()">
                    <i class="fa fa-play"></i>
                    Play
                    /
                    <i class="fa fa-pause"></i>
                    Pause
                </button>

                <button class="btn btn-primary" onclick="wavesurfer.skipForward()">
                    <i class="fa fa-step-forward"></i>
                    Forward
                </button>

                <button class="btn btn-primary" onclick="wavesurfer.toggleMute()">
                    <i class="fa fa-volume-off"></i>
                    Toggle Mute
                </button>
            </div>
        </div>
    </div>
</div>
<!--Jquery plugin-->
<script>
    $(document).ready(function () {
        $('#song1').equalizer({
            color1: '#42a994',
            color2: '#00f218'
        });
    });
</script>
<script>
    $(document).ready(function () {
        showFoodMenu();
    });

    function showFoodMenu() {
        $.ajax({
            type: "GET",
            url: "mp3.xml",
            dataType: "xml",
            error: function (e) {
                alert("An error occurred while processing XML file");
                console.log("XML reading Failed: ", e);
            },
            success: function (response) {
                $(response).find("tracklist").each(function () {
                    let _name = 'Tên Bài Hát: ' + $(this).find('title').text();
                    let _price = 'Ca sĩ: ' + $(this).find('creator').text();
                    $("ul").append('<li>' + _name + '</li>');
                    $("ul").append('<li>' + _price + '</li>');
                    $("#imgsong").attr('src', $(this).find('avatar').text());
                    $("#linkmp3").attr('src', $(this).find('location').text());
                });
            }
        });
    }

    var ctx = document.createElement('canvas').getContext('2d');
    var linGrad = ctx.createLinearGradient(0, 64, 0, 200);
    linGrad.addColorStop(0.5, 'rgba(255, 255, 255, 1.000)');
    linGrad.addColorStop(0.5, 'rgba(183, 183, 183, 1.000)');
    var wavesurfer = WaveSurfer.create({
        container: '#waveform',
        waveColor: linGrad,
        progressColor: 'hsla(200, 100%, 30%, 0.5)',
        cursorColor: '#fff',
        barWidth: 3
    });
    wavesurfer.on('loading', function (percents) {
        document.getElementById('progress').value = percents;
    });
    wavesurfer.on('ready', function (percents) {
        document.getElementById('progress').style.display = 'none';
    });
    wavesurfer.load('https://aredir.nixcdn.com/NhacCuaTui995/SoRangEmBietAnhConYeuEm-JuunDangDung-6217224.mp3?st=vihqMTPwAKFhy_1OEVUE3A&e=1592196759');

</script>
</body>
</html>